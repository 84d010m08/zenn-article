---
title: "「TODO × SNS」学習習慣支援アプリに使用した技術と課題"
emoji: "📱"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: [ios, Flutter]
published: false
---

こんにちは。私はFlutterを用いて個人開発をしているKyoichiです。私は勉強系アプリを作りたいと考え、2022年6月29日から個人で新規アプリ開発を行いました。アプリ自体は8月17日にリリースできたのですが、いくつもの課題が見つかりました。この記事では、アプリ開発の経験から得た知見と課題をアウトプットします。

# なぜアプリを作ったか
私が勉強系のアプリを作成したい考えた理由は以下のようになります。
1. 以前使用していたStudyPlusとForestというアプリのいいとこ取りをしたい
2. タスク管理と勉強計画を一体化したい

まず、StudyPlusというアプリは勉強系SNSです。
https://apps.apple.com/jp/app/apple-store/id505410049
twitterのように友達をフォローすることができて、勉強をすると勉強時間がタイムラインに表示されます。更に合計勉強時間などで切磋琢磨することができます。勉強特化型のtwitterのようなサービスは勉強のモチベーションを保つために非常に有益であるということが受験勉強の経験からわかりました。

次に、ForestというサービスもSNSのような要素があります。
https://apps.apple.com/jp/app/forest-%E9%9B%86%E4%B8%AD%E5%8A%9B%E3%82%92%E9%AB%98%E3%82%81%E3%82%8B/id866450515
しかし、Forestの真の良いところは「勉強時間に応じた実績や達成項目があるところ」です。勉強量に応じて木が成長したり、ゲーム内通貨が溜まって、その通貨で新しい木を購入することができます。つまり、Forestにはソシャゲっぽい要素があるということです。この２点を組み合わせたアプリは調べた限りは存在しません。よってこの2点をコアサービスとしたアプリを開発しようと考えました。

また、もう一つアプリに組み込みたい要素がありました。それはタスク管理と勉強計画を統合したいということです。現在自分はMicrosoft Todoというアプリでタスク管理をしています。大学の課題を登録して課題の提出を忘れないようにしています。また、作りたいアプリのアイデアや計画をNotionに記録し、課題以外の自己学習のザックリした予定をGoogleカレンダーで管理しています。Microsoft Todoの良い点は、タスクに期限を設定して絶対に忘れないようにできることです。しかしカレンダー表示がないため、タスクから一週間の予定を考えたりするときに不便となります。結局、大学の課題は期限を鑑みながら時間があるときに取り組むという計画性のないやり方になってしまいました。よって、カレンダーとタスク管理を一体化し、タスクにはカテゴリーや期限を設けたいという需要が自分にありました。よって、以下の要素をコアサービスに組み込むことにしました。

よってアプリが提供するコアサービスは以下のようになります。
- SNS機能で友達と勉強時間を切磋琢磨する
- 勉強時間に応じた実績や達成項目を設けてモチベを沸かせる
- 勉強計画をタスク管理風に追加し、カレンダーで表示する

# 使用技術
まず、iOSアプリのフロントエンドにはFlutterを用いました。Flutterはライブラリが豊富で、コードが書きやすく、高速で開発ができます。またマルチプラットフォーム対応が可能なため、iOSでそこそこダウンロードされれば、アンドロイド版を即座にリリースできるという強みもあります。
Dart, Flutterで使用したライブラリの一部を紹介します。
- Hooks Riverpod (アプリの状態管理に使用)
- Freezed (データクラスをimmutableにして値が書き換わらないようにする)

この他にも多くのUI構成に関するライブラリなどを使用しました。

バックエンドにはFirebaseを使用しました。FirebaseはGoogleが提供しているmBassで、モバイルアプリのバックエンド処理を簡単に実装することができます。
使用した技術は以下の通りです。
- Firebase Auth (ログイン、ログアウト)
- Firebase Firestore (データ保存)
- Firebase Storage (画像保存)
- Firebase Cloud Functions (任意の関数を実行可能, アカウント削除機能に必要)
- Firebase Hosting (静的サイトの構築, アプリのプライバシーポリシーに仕様)

以上の機能は最初はドキュメントを読んで理解しながら実装しますが、慣れれば秒でバックエンドを実装できます。

# 詰まったところ
## 状態管理
まず、フロントエンド開発には必須の状態管理を学ぶ必要がありました。値の再代入やUIの再構築に関する理解をしていないと、アプリが意図しない動作をしてしまうことがあります。riverpodのドキュメントを読み漁りました。

# Firebase関連
アカウント作成にはFirebaseAuthのメソッドで対応できます。一方アカウント削除には、セキュリティ的な理由からCloudFunctions経由でしか削除できないことが判明しました。しかしCloudFunctionsでデプロイしようとすると、node.jsやnpm, firebase-toolsのバージョン関連のエラーが発生して何時間か詰まりました。また、javascriptをある程度勉強する必要がありました。

# appleのリジェクト対応
AppStoreへのリリース時に2回リジェクトされてしまいました。原因は以下のようなものでした。
- カメラやフォトライブラリの使用を許可する文言に「具体的な使用理由」を書きなさい。
- 